<script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=qb8k02fqhx"></script>
<div id="map" style="width:100%;height:400px;"></div>
<script>

    function createMap(geoPos){
        var crd = geoPos.coords;

        console.log('찍을라고');
        console.log('Your current position is:');
        console.log('Latitude : ' + crd.latitude);
        console.log('Longitude: ' + crd.longitude);
        console.log('More or less ' + crd.accuracy + ' meters.');

        var mapOptions = {
            center: new naver.maps.LatLng(crd.latitude, crd.longitude),
            zoom: 18
        };
        var map = new naver.maps.Map('map', mapOptions);

        var marker = new naver.maps.Marker({
            position: new naver.maps.LatLng(crd.latitude, crd.longitude),
            title: '현위치',
            map: map
        });
    }

    /*
    var contentString = [
        '<div class="iw_inner" onclick="window.open(\'https://naver.me/FhAUVHe1\');" style="padding: 0px 20px 0px 20px">',
        '   <h3>계명대학교</h3>',
        '   <p>대구 달서구 신당동 산40-1<br>053-580-5114',
        '   </p>',
        '</div>'
    ].join('');

    var infowindow = new naver.maps.InfoWindow({
        content: contentString
    });

    naver.maps.Event.addListener(marker, "click", function (e) {
        if (infowindow.getMap()) {
            infowindow.close();
        } else {
            infowindow.open(map, marker);
        }
    });

    infowindow.open(map, marker);
    */

    //현위치
    var options = {
      enableHighAccuracy: true,
      timeout: 5000,
      maximumAge: 0
    };

    function success(pos) {
      var crd = pos.coords;

      console.log('새로 받아오나?');
      console.log('Your current position is:');
      console.log('Latitude : ' + crd.latitude);
      console.log('Longitude: ' + crd.longitude);
      console.log('More or less ' + crd.accuracy + ' meters.');
    };

    function error(err) {
      console.warn('ERROR(' + err.code + '): ' + err.message);
    };

    function getCurrentPosition() {
        return new Promise(function(resolve, reject) {
            //navigator.geolocation.getCurrentPosition(success, error, options)
            navigator.geolocation.getCurrentPosition(resolve, reject, options)
        });
    }

    getCurrentPosition().then(x => createMap(x));

</script>